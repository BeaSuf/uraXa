{"version":3,"sources":["UserContext.js","services/errorHandlerService.js","history.js","components/profile/Profile.js","components/map/Map.js","components/search/autoSuggest.js","components/bar/Bar.js","components/add/Add.js","components/sidebar/Sidebar.js","components/search/SearchBar.js","components/hub/Hub.js","components/map/markerPosition.js","components/signup/Signup.js","components/login/Login.js","components/home/Home.js","components/footer/Footer.js","App.js","serviceWorker.js","index.js"],"names":["UserContext","createContext","handleErrors","response","undefined","status","parseErrors","err","Error","console","error","text","then","errorMessage","history","Profile","email","useContext","token","username","posts","setPosts","login","domain","useState","loading","setLoading","useEffect","url","fetch","method","headers","json","log","data","catch","Fragment","className","onClick","push","map","post","index","key","src","image","title","date","slice","window","confirm","postId","newPost","filter","id","requestOptions","body","JSON","stringify","userPosts","deletePost","Map","postMarkers","mapSearchCoord","cityCentre","userCentre","citySearch","setPostInMarker","setMarkIsClicked","setLocationClickCoord","mapRef","React","mapPlaces","postLoading","setLocationIsClicked","current","defaultLayers","H","platform","service","Platform","apikey","mapFocus","centre","createDefaultLayers","vector","normal","center","zoom","pixelRatio","devicePixelRatio","length","mapevents","Behavior","MapEvents","disable","DBLTAPZOOM","ui","UI","createDefault","mapSettings","getControl","setAlignment","diplayDataOnMap","content","html","forEach","result","isEmpty","icon","Icon","marker","Marker","coordinates","setData","addObject","addEventListener","centreMarker","locationOfUser","locationIcon","contentDesc","isEqual","provider","getBaseLayer","getProvider","style","Style","setStyle","evt","pointer","currentPointer","location","setPin","screenToGeo","viewportX","viewportY","removeBubble","getBubbles","target","bubble","InfoBubble","getGeometry","getData","addBubble","dispose","ref","autoSuggest","searchString","a","lat","lng","items","Bar","maxLength","charsLeft","barStyle","width","Add","setTitle","description","setDescription","setLocation","setImage","preview","setPreview","category","setCategory","isButtonDisabled","setIsButtonDisabled","types","setTypes","setPostLoading","locationClickCoord","setPublish","trim","tags","document","querySelector","classList","toggle","name","type","onChange","e","files","URL","createObjectURL","required","htmlFor","placeholder","autoComplete","value","height","defaultValue","disabled","tag","preventDefault","dataForm","FormData","append","res","position","handleAdd","Sidebar","markIsClicked","postInMarker","sidebarCurrentIsShown","setSidebarCurrentIsShown","publish","locationIsClicked","reverse","sidebar","arrowIcon","message","SearchBar","setUserCentre","setCityCentre","setCitySearch","cityButtonDisabled","setCityButtonDisabled","setPosition","suggestedLocations","setSuggestedLocations","focused","setFocused","r","onFocus","onBlur","borderRadius","onMouseDown","innerHTML","directSearchCity","Hub","setTags","setPostMarkers","setMapSearchCoord","postsByTag","tempost","markPosts","x","y","marks","mapSearch","searchPlaces","search","address","label","markPlaces","Signup","setEmail","setToken","setUsername","setLogin","password","setPassword","onSubmit","user","Login","helperText","setHelperText","Home","Footer","App","setMapPlaces","userContext","activeClassName","to","exact","Provider","path","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b604f614.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\nexport const UserContext = createContext(null);","export const handleErrors = response => {\n    if (response !== undefined && response.status > 300) {\n        throw response;\n    }\n    return response;\n}\n\nexport const parseErrors = err => {\n    err instanceof Error ?\n    console.error(err)\n    :\n    err.text().then( errorMessage => {\n        console.error(errorMessage);\n    });\n}","import { createBrowserHistory as history} from 'history';\n\nexport default history()","import React, { useContext } from 'react';\nimport { useState, useEffect } from 'react';\nimport { UserContext } from '../../UserContext';\nimport { handleErrors, parseErrors } from '../../services/errorHandlerService';\nimport history from '../../history';\n\nimport './Profile.css';\n\nexport default function Profile() {\n\tconst { email } = useContext(UserContext);\n\tconst { token } = useContext(UserContext);\n\tconst { username } = useContext(UserContext);\n\tconst { posts, setPosts } = useContext(UserContext);\n\tconst { login } = useContext(UserContext);\n\tconst { domain } = useContext(UserContext);\n\n\tconst [ loading, setLoading ] = useState(false);\n\tconst [ error ] = useState(true);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tlet url = `${domain}/api/post/email?email=${email}&token=${token}`;\n\n\t\t\tconst requestOptions = {\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: { 'Content-Type': 'application/json' }\n\t\t\t};\n\n\t\t\tfetch(url, requestOptions)\n\t\t\t\t.then(handleErrors)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetLoading(true);\n\t\t\t\t\tconst json = response.json();\n\t\t\t\t\tconsole.log(json);\n\t\t\t\t\treturn json;\n\t\t\t\t})\n\t\t\t\t.then((data) => {\n\t\t\t\t\tconsole.log(data.posts);\n\t\t\t\t\tsetPosts(data.posts);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tparseErrors(err);\n\t\t\t\t});\n\t\t},\n\t\t[ login ]\n\t);\n\n\tconst deletePost = (postId) => {\n\t\tlet newPost = posts.filter((post) => {\n\t\t\treturn post.id !== postId;\n\t\t});\n\t\tsetPosts(newPost);\n\n\t\tlet url = `${domain}/api/post/id`;\n\n\t\tconst requestOptions = {\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\tbody: JSON.stringify({ email: email, token: token, id: postId })\n\t\t};\n\n\t\tfetch(url, requestOptions)\n\t\t\t.then(handleErrors)\n\t\t\t.then((response) => {\n\t\t\t\tconst json = response.json();\n\t\t\t\tconsole.log(json);\n\t\t\t\treturn json;\n\t\t\t})\n\t\t\t.then((userPosts) => {\n\t\t\t\tconsole.log(userPosts.posts[0]);\n\t\t\t\tlet newPost = userPosts.posts[0];\n\t\t\t\tsetPosts([ ...posts, newPost ]);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tparseErrors(err);\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div className='loading-error'>\n\t\t\t\t{loading && <h3>. | . | . | .</h3>}\n\t\t\t\t{!error && <h3>loading failed</h3>}\n\t\t\t</div>\n\t\t\t<div className='add-post'>\n\t\t\t\t<button onClick={() => history.push('/add')}>Add a Story</button>\n\t\t\t</div>\n\t\t\t<div className='hub'>\n\t\t\t\t<div className='container-posts'>\n\t\t\t\t\t{posts &&\n\t\t\t\t\t\tposts.map((post, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={index} className='hub-posts'>\n\t\t\t\t\t\t\t\t\t<div className='img-container'>\n\t\t\t\t\t\t\t\t\t\t<img src={post.image} className='img-post' />\n\t\t\t\t\t\t\t\t\t\t<h2 className='title-post-card'>{post.title}</h2>\n\t\t\t\t\t\t\t\t\t\t<p className='user-post'>By: {username}</p>\n\t\t\t\t\t\t\t\t\t\t<p className='date-post'>{post.date.slice(0, 10)}</p>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName='delete-btn'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (window.confirm('are you sure to delete the post?'))\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeletePost(post.id);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='data-container'>\n\t\t\t\t\t\t\t\t\t\t<h4>{post.text}</h4>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</React.Fragment>\n\t);\n}\n","import * as React from 'react';\nimport { useEffect, useContext, useState } from 'react';\nimport { isEmpty, isEqual } from 'lodash';\nimport './Map.css';\nimport { UserContext } from '../../UserContext';\n\nexport const Map = ({\n\tpostMarkers,\n\tmapSearchCoord,\n\tcityCentre,\n\tuserCentre,\n\tcitySearch,\n\tsetPostInMarker,\n\tsetMarkIsClicked,\n\tsetLocationClickCoord\n}) => {\n\tconst mapRef = React.useRef(null);\n\tconst { login } = useContext(UserContext);\n\tconst { posts } = useContext(UserContext);\n\tconst { mapPlaces } = useContext(UserContext);\n\tconst { username } = useContext(UserContext);\n\tconst { postLoading } = useContext(UserContext);\n\tconst { setLocationIsClicked } = useContext(UserContext); // This status is both used in Map.js and Sidebar.js\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!mapRef.current) return;\n\t\t\tconst H = window.H;\n\t\t\tconst platform = new H.service.Platform({\n\t\t\t\tapikey: 'Plzpoyk5PfFE85BLe9FTbYJlSarM9Wb2lMjzki6QQwY'\n\t\t\t});\n\n\t\t\t// initial position of the map\n\t\t\tlet map;\n\t\t\tlet defaultLayers;\n\t\t\tconst mapFocus = (centre) => {\n\t\t\t\tdefaultLayers = platform.createDefaultLayers();\n\t\t\t\tmap = new H.Map(mapRef.current, defaultLayers.vector.normal.map, {\n\t\t\t\t\tcenter: centre,\n\t\t\t\t\tzoom: 12,\n\t\t\t\t\tpixelRatio: window.devicePixelRatio || 1\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tif (login) {\n\t\t\t\tmapFocus(userCentre);\n\t\t\t} else {\n\t\t\t\tmapFocus(cityCentre);\n\t\t\t}\n\t\t\tif (citySearch.length > 0) mapFocus(citySearch[0]);\n\n\t\t\t// ui control and position\n\t\t\tconst behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));\n\t\t\tbehavior.disable(H.mapevents.Behavior.DBLTAPZOOM);\n\t\t\tconst ui = H.ui.UI.createDefault(map, defaultLayers);\n\n\t\t\tlet mapSettings = ui.getControl('mapsettings');\n\t\t\tlet zoom = ui.getControl('zoom');\n\t\t\tmapSettings.setAlignment('top-right');\n\t\t\tzoom.setAlignment('top-right');\n\n\t\t\t// bubble content generator\n\t\t\tconst diplayDataOnMap = (content) => {\n\t\t\t\tlet html = '';\n\n\t\t\t\tif (mapPlaces.length > 0 && content !== 'pin' && typeof content !== 'object') {\n\t\t\t\t\thtml = `\n\t\t\t\t\t<div class=\"pin-card\">\n\t\t\t\t\t\t<p class=\"pin_text\">${content}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t} else if (content === 'pin') {\n\t\t\t\t\thtml = `\n\t\t\t\t\t<div class=\"pin-card\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t${login ? 'Add a Story' : 'Please LogIn to add a story'}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t} else if (typeof content === 'object') {\n\t\t\t\t\thtml = `\n\t\t\t\t\t<div class=\"pin-card\">\n\t\t\t\t\t\t<div class=\"container-pin-img\">\n\t\t\t\t\t\t\t<img class=\"pin-img\" src=${content.image}></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p class=\"pin-text\">${content.title}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t\treturn html;\n\t\t\t};\n\n\t\t\t// post marker\n\t\t\tpostMarkers.forEach((result) => {\n\t\t\t\tif (!isEmpty(result)) {\n\t\t\t\t\tlet icon = new H.map.Icon('https://cdn2.iconfinder.com/data/icons/gur-project-1/32/1_10.png');\n\t\t\t\t\tlet marker = new H.map.Marker(result.coordinates, { icon: icon });\n\t\t\t\t\tlet content = { image: result.image, title: result.title };\n\t\t\t\t\tmarker.setData(diplayDataOnMap(content));\n\t\t\t\t\tmap.addObject(marker);\n\n\t\t\t\t\t// Add onclick event listener to triangular icon\n\t\t\t\t\tmarker.addEventListener('tap', () => {\n\t\t\t\t\t\tsetPostInMarker(result);\n\t\t\t\t\t\tsetMarkIsClicked(true); // inherit from Hub.js, check if icon is clicked\n\t\t\t\t\t\tsetLocationIsClicked(false);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// centre marker\n\t\t\tconst centreMarker = (centre, url, content) => {\n\t\t\t\tlet locationOfUser = centre;\n\t\t\t\tlet icon = new H.map.Icon(url);\n\t\t\t\tlet marker = new H.map.Marker(locationOfUser, { icon: icon });\n\t\t\t\tmarker.setData(content);\n\t\t\t\tmap.addObject(marker);\n\t\t\t};\n\n\t\t\tlet homeIcon = 'https://cdn2.iconfinder.com/data/icons/gur-project-1/32/1_26.png';\n\t\t\tlet locationIcon = 'https://cdn2.iconfinder.com/data/icons/gur-project-1/32/1_26.png';\n\t\t\tlet contentDesc = `Welcome ${username}`;\n\t\t\tif (login) {\n\t\t\t\tcentreMarker(userCentre, isEqual(userCentre, cityCentre) ? locationIcon : homeIcon, contentDesc);\n\t\t\t} else {\n\t\t\t\tcentreMarker(cityCentre, locationIcon, contentDesc);\n\t\t\t}\n\n\t\t\t// map search marker\n\t\t\tmapSearchCoord.forEach((result) => {\n\t\t\t\tlet icon = new H.map.Icon('https://cdn2.iconfinder.com/data/icons/gur-project-1/32/1_10.png');\n\t\t\t\tlet marker = new H.map.Marker(result.coordinates, { icon: icon });\n\t\t\t\tmarker.setData(diplayDataOnMap(result.title));\n\t\t\t\tmap.addObject(marker);\n\t\t\t});\n\n\t\t\t// // style\n\t\t\tconst provider = map.getBaseLayer().getProvider();\n\t\t\tconst style = new H.map.Style(\n\t\t\t\t'https://js.api.here.com/v3/3.1/styles/omv/normal.day.yaml',\n\t\t\t\t'https://js.api.here.com/v3/3.1/styles/omv/'\n\t\t\t);\n\t\t\tprovider.setStyle(style);\n\n\t\t\t// user click - add post\n\t\t\tconst setPin = (location) => {\n\t\t\t\tlet icon = new H.map.Icon(\n\t\t\t\t\t'https://cdn1.iconfinder.com/data/icons/Momentum_GlossyEntireSet/32/pin-red.png'\n\t\t\t\t);\n\t\t\t\tlet marker = new H.map.Marker(location, { icon: icon });\n\n\t\t\t\tmarker.setData(diplayDataOnMap('pin'));\n\t\t\t\tmap.addObject(marker);\n\n\t\t\t\tmarker.addEventListener('tap', () => {\n\t\t\t\t\tsetLocationClickCoord(location);\n\t\t\t\t\tsetLocationIsClicked(true);\n\t\t\t\t\tsetPostInMarker(null);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t// tap location\n\t\t\tmap.addEventListener('dbltap', function(evt) {\n\t\t\t\tlet pointer = evt.currentPointer;\n\t\t\t\tlet pointerPosition = map.screenToGeo(pointer.viewportX, pointer.viewportY);\n\t\t\t\tsetPin(pointerPosition);\n\t\t\t});\n\n\t\t\t// make bubble on a click\n\t\t\tmap.addEventListener('tap', function(evt) {\n\t\t\t\t// bubble\n\t\t\t\tui.removeBubble(ui.getBubbles()[0]); // Remove current bubble\n\n\t\t\t\tif (evt.target instanceof H.map.Marker) {\n\t\t\t\t\tlet bubble = new H.ui.InfoBubble(evt.target.getGeometry(), {\n\t\t\t\t\t\tcontent: evt.target.getData()\n\t\t\t\t\t});\n\t\t\t\t\tui.addBubble(bubble);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn () => {\n\t\t\t\tmap.dispose();\n\t\t\t};\n\t\t},\n\t\t[ mapRef, postMarkers, mapSearchCoord, cityCentre, userCentre, posts, login, postLoading ]\n\t);\n\treturn <div className='map' ref={mapRef} />;\n};\n","export const autoSuggest = async (searchString, center) => {\n\tconst apikey = 'Plzpoyk5PfFE85BLe9FTbYJlSarM9Wb2lMjzki6QQwY';\n\n\tif (!searchString) {\n\t\treturn;\n\t}\n\tlet response = await fetch(\n\t\t`https://discover.search.hereapi.com/v1/discover?apiKey=${apikey}&at=${center.lat},${center.lng}&limit=10&q=${searchString}`\n\t);\n\tlet data = await response.json();\n\treturn await data.items;\n};\n","import React from 'react';\n\nimport './Bar.css';\n\nexport default function Bar({ maxLength, charsLeft }) {\n\tconst barStyle = {\n\t\twidth: `${charsLeft / maxLength * 100}%`\n\t};\n\n\treturn (\n\t\t<div className='bar-wrapper'>\n\t\t\t<div style={barStyle} className='bar' />\n\t\t\t<span>{charsLeft}</span>\n\t\t</div>\n\t);\n}\n","import React, { useContext } from 'react';\nimport { useState, useEffect } from 'react';\nimport { UserContext } from '../../UserContext';\nimport history from '../../history';\nimport { autoSuggest } from '../search/autoSuggest';\nimport { handleErrors, parseErrors } from '../../services/errorHandlerService';\nimport Bar from '../bar/Bar';\nimport { isEmpty } from 'lodash';\n\nimport '../signup/Signup.css';\n\nexport default function Add() {\n\tconst [ title, setTitle ] = useState('');\n\tconst [ description, setDescription ] = useState('');\n\tconst [ location, setLocation ] = useState('');\n\tconst [ image, setImage ] = useState(null);\n\tconst [ preview, setPreview ] = useState(null);\n\tconst [ category, setCategory ] = useState('');\n\tconst [ isButtonDisabled, setIsButtonDisabled ] = useState(true);\n\n\tconst { login } = useContext(UserContext);\n\tconst { posts, setPosts } = useContext(UserContext);\n\tconst { email } = useContext(UserContext);\n\tconst { token } = useContext(UserContext);\n\tconst { types, setTypes } = useContext(UserContext);\n\tconst { userCentre } = useContext(UserContext);\n\tconst { setPostLoading } = useContext(UserContext);\n\tconst { locationClickCoord, setLocationClickCoord } = useContext(UserContext);\n\tconst { setPublish } = useContext(UserContext);\n\tconst { setLocationIsClicked } = useContext(UserContext);\n\tconst { domain } = useContext(UserContext);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (title.trim() && description.trim() && location.trim() && category !== '' && image !== null) {\n\t\t\t\tsetIsButtonDisabled(false);\n\t\t\t} else {\n\t\t\t\tsetIsButtonDisabled(true);\n\t\t\t}\n\t\t},\n\t\t[ title, description, location, image, category ]\n\t);\n\n\tuseEffect(() => {\n\t\tlet url = `${domain}/api/tag?email=${email}&token=${token}`;\n\n\t\tconst requestOptions = {\n\t\t\tmethod: 'GET',\n\t\t\theaders: { 'Content-Type': 'application/json' }\n\t\t};\n\n\t\tfetch(url, requestOptions)\n\t\t\t.then(handleErrors)\n\t\t\t.then((response) => {\n\t\t\t\tconst json = response.json();\n\t\t\t\treturn json;\n\t\t\t})\n\t\t\t.then((data) => {\n\t\t\t\tsetTypes(data.tags);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tparseErrors(err);\n\t\t\t});\n\t}, []);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!isEmpty(locationClickCoord)) {\n\t\t\t\tlet location = document.querySelector('#location-input');\n\t\t\t\tif (location !== null) location.classList.toggle('input-location-none');\n\t\t\t\tsetLocation('location');\n\t\t\t\t// to hack the condition and enable the button\n\t\t\t}\n\t\t},\n\t\t[ locationClickCoord ]\n\t);\n\n\tconst handleAdd = (e) => {\n\t\te.preventDefault();\n\t\tsetPostLoading(true);\n\n\t\tlet url = `${domain}/api/post`;\n\n\t\tconst dataForm = new FormData();\n\n\t\tdataForm.append('title', title);\n\t\tdataForm.append('text', description);\n\t\tdataForm.append('token', token);\n\t\tdataForm.append('email', email);\n\t\tdataForm.append('image', image);\n\t\tdataForm.append('tag', category);\n\n\t\tautoSuggest(location, userCentre).then((res) => {\n\t\t\tlet coordinates = !isEmpty(locationClickCoord)\n\t\t\t\t? `(${locationClickCoord.lat}, ${locationClickCoord.lng})`\n\t\t\t\t: `(${res[0].position.lat}, ${res[0].position.lng})`;\n\n\t\t\tdataForm.append('location', coordinates);\n\n\t\t\tconst requestOptions = {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: dataForm\n\t\t\t};\n\n\t\t\tfetch(url, requestOptions)\n\t\t\t\t.then(handleErrors)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tconst json = response.json();\n\t\t\t\t\tsetPostLoading(false);\n\t\t\t\t\tsetPublish(true);\n\t\t\t\t\tsetLocationIsClicked(false);\n\t\t\t\t\treturn json;\n\t\t\t\t})\n\t\t\t\t.then((userPosts) => {\n\t\t\t\t\tlet newPost = userPosts.post;\n\t\t\t\t\tsetPosts([ ...posts, newPost ]);\n\n\t\t\t\t\tlet location = document.querySelector('#location-input');\n\t\t\t\t\tlocation.classList.toggle('input-location-none');\n\t\t\t\t\tsetLocationClickCoord({});\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tparseErrors(err);\n\t\t\t\t});\n\t\t});\n\t\thistory.push('/map');\n\t};\n\n\tconst maxLength = 500;\n\tconst charsLeft = maxLength - description.length;\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{login ? (\n\t\t\t\t<div className='add-container'>\n\t\t\t\t\t<div className='container-img-preview'>\n\t\t\t\t\t\t<img className='img-preview' src={preview} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<form className='form-wraper' method='POST' name='signup' id='form'>\n\t\t\t\t\t\t<div className='title'>\n\t\t\t\t\t\t\t<h2>Add Story</h2>\n\t\t\t\t\t\t\t<p>fill in all fields</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='input-wraper'>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\t\t\ttype='file'\n\t\t\t\t\t\t\t\tid='file'\n\t\t\t\t\t\t\t\tname='file'\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetImage(e.target.files[0]);\n\t\t\t\t\t\t\t\t\tsetPreview(URL.createObjectURL(e.target.files[0]));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<label className='file-label' htmlFor='file'>\n\t\t\t\t\t\t\t\tUpload / Edit an Image\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='input-wraper'>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\t\t\tplaceholder='name your story'\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\tid='title'\n\t\t\t\t\t\t\t\tname='title'\n\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\tonChange={(e) => setTitle(e.target.value)}\n\t\t\t\t\t\t\t\tmaxLength='20'\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<label className='label' htmlFor='title'>\n\t\t\t\t\t\t\t\tTitle\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='input-wraper'>\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tstyle={{ height: '250px' }}\n\t\t\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\t\t\tplaceholder='tell the world your story'\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\tid='description'\n\t\t\t\t\t\t\t\tname='description'\n\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\tonChange={(e) => setDescription(e.target.value)}\n\t\t\t\t\t\t\t\tmaxLength='500'\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Bar maxLength={maxLength} charsLeft={charsLeft} />\n\t\t\t\t\t\t\t<label className='label' htmlFor='description'>\n\t\t\t\t\t\t\t\tDescription\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='input-wraper' id='location-input'>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\t\t\tplaceholder='name of a city, place or address'\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\tid='location'\n\t\t\t\t\t\t\t\tname='location'\n\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<label className='label' htmlFor='location'>\n\t\t\t\t\t\t\t\tLocation\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='input-wraper'>\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tclassName='select-wraper'\n\t\t\t\t\t\t\t\tdefaultValue={'default'}\n\t\t\t\t\t\t\t\tonChange={(e) => setCategory(e.target.value)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option value='default' disabled>\n\t\t\t\t\t\t\t\t\tSelect a type of place\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t{types !== undefined && types.length > 0 ? (\n\t\t\t\t\t\t\t\t\ttypes.map((type) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<option key={type.id} value={type.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t{type.tag}\n\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t<label className='label' htmlFor='select'>\n\t\t\t\t\t\t\t\tCategory\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button className='btn' disabled={isButtonDisabled} onClick={(e) => handleAdd(e)}>\n\t\t\t\t\t\t\tPublish\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\thistory.push('/login')\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n","import React, { useEffect, useState, useContext } from 'react';\nimport { UserContext } from '../../UserContext';\nimport Add from '../add/Add';\nimport { isEmpty } from 'lodash';\n\nimport './Sidebar.css';\n\nexport const Sidebar = ({ markIsClicked, setMarkIsClicked, postInMarker, setPostInMarker }) => {\n\tconst [ sidebarCurrentIsShown, setSidebarCurrentIsShown ] = useState(false);\n\tconst { login } = useContext(UserContext);\n\tconst { publish, setPublish } = useContext(UserContext);\n\tconst { locationIsClicked, setLocationIsClicked } = useContext(UserContext);\n\n\tconst reverse = () => {\n\t\tconst sidebar = document.querySelector('div.sidebar');\n\t\tconst arrowIcon = document.querySelector('span.arrow');\n\t\tconst message = document.querySelector('.sidebar-display-none');\n\n\t\tsidebar.classList.toggle('sidebar--expand');\n\t\tarrowIcon.classList.toggle('reverse');\n\n\t\tif (message !== null) message.classList.toggle('sidebar-display');\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\t// Sidebar slides in when it is hidden and post marker is clicked\n\t\t\tif (!publish && markIsClicked && !sidebarCurrentIsShown && !locationIsClicked) {\n\t\t\t\treverse();\n\t\t\t\tsetSidebarCurrentIsShown(true);\n\t\t\t}\n\n\t\t\t// Sidebar slides in when it is hidden and red marker is clicked\n\t\t\tif (!publish && locationIsClicked && login && !sidebarCurrentIsShown) {\n\t\t\t\treverse();\n\t\t\t\tsetSidebarCurrentIsShown(true);\n\t\t\t} else if (locationIsClicked && sidebarCurrentIsShown && !login) {\n\t\t\t\treverse();\n\t\t\t\tsetSidebarCurrentIsShown(false);\n\t\t\t} else if (publish && sidebarCurrentIsShown && login) {\n\t\t\t\tsetSidebarCurrentIsShown(false);\n\t\t\t\treverse();\n\t\t\t\tsetPublish(false);\n\t\t\t}\n\t\t},\n\t\t[ publish, markIsClicked, locationIsClicked, login ]\n\t);\n\n\t// Click arrow icon to call this function,\n\tconst handleClick = (e) => {\n\t\treverse();\n\t\tif (markIsClicked) setMarkIsClicked(false);\n\t\tsetSidebarCurrentIsShown(!sidebarCurrentIsShown);\n\t\tsetPostInMarker(null);\n\n\t\tif (locationIsClicked) setLocationIsClicked(false);\n\t\tsetSidebarCurrentIsShown(!sidebarCurrentIsShown);\n\t};\n\n\treturn (\n\t\t<div className='sidebar'>\n\t\t\t<span className='arrow' onClick={handleClick}>\n\t\t\t\t>>>\n\t\t\t</span>\n\t\t\t{locationIsClicked && login ? <Add /> : null}\n\t\t\t{!isEmpty(postInMarker) ? (\n\t\t\t\t<div className='sidebar-post'>\n\t\t\t\t\t<div className='sidebar-post-container'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src={postInMarker.image} className='sidebar-post-image' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h4 className='data-post'>By: {postInMarker.username}</h4>\n\t\t\t\t\t\t<h4 className='data-post'>Tag: {postInMarker.tag}</h4>\n\t\t\t\t\t\t<h4 className='data-post'>{postInMarker.date.slice(0, 10)}</h4>\n\t\t\t\t\t\t<h1 className='title-post'>{postInMarker.title}</h1>\n\t\t\t\t\t\t<h3 className='text-post'>{postInMarker.text}</h3>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t\t{!locationIsClicked && isEmpty(postInMarker) ? (\n\t\t\t\t<div className='sidebar-display-none'>\n\t\t\t\t\t<img src='https://cdn2.iconfinder.com/data/icons/gur-project-1/32/1_26.png' />\n\t\t\t\t\t<p>search the map to go to new places</p>\n\t\t\t\t\t<img src='https://cdn2.iconfinder.com/data/icons/gur-project-1/32/1_10.png' />\n\t\t\t\t\t<p>click on the icon to explore posted stories</p>\n\t\t\t\t\t<img src='https://cdn1.iconfinder.com/data/icons/Momentum_GlossyEntireSet/32/pin-red.png' />\n\t\t\t\t\t<p>double click on the map to post stories</p>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n","import React, { useContext, useState, useEffect } from 'react';\nimport { autoSuggest } from './autoSuggest';\nimport { UserContext } from '../../UserContext';\nimport { handleErrors, parseErrors } from '../../services/errorHandlerService';\n\nimport './SearchBar.css';\n\nexport default function SearchBar() {\n\tconst { userCentre, setUserCentre } = useContext(UserContext);\n\tconst { cityCentre, setCityCentre } = useContext(UserContext);\n\n\tconst [ citySearch, setCitySearch ] = useState('');\n\tconst [ cityButtonDisabled, setCityButtonDisabled ] = useState(true);\n\n\tconst [ location, setLocation ] = useState('');\n\tconst [ setPosition ] = useState('');\n\n\t// Check relavant locations hook\n\tconst [ suggestedLocations, setSuggestedLocations ] = useState([]); // used in listbox\n\tconst [ focused, setFocused ] = useState(false);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tautoSuggest(location, userCentre)\n\t\t\t\t.then(handleErrors)\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (res !== undefined) {\n\t\t\t\t\t\tsetSuggestedLocations(\n\t\t\t\t\t\t\tres.map((r) => {\n\t\t\t\t\t\t\t\treturn r;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tlet position;\n\t\t\t\t\t\tif (res !== undefined && res.length > 0) {\n\t\t\t\t\t\t\tposition = `(${res[0].position.lat}, ${res[0].position.lng})`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetPosition(position);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tparseErrors(err);\n\t\t\t\t});\n\t\t},\n\t\t[ location ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (citySearch.trim()) {\n\t\t\t\tsetCityButtonDisabled(false);\n\t\t\t} else {\n\t\t\t\tsetCityButtonDisabled(true);\n\t\t\t}\n\t\t},\n\t\t[ citySearch ]\n\t);\n\n\tconst handleCity = (e) => {\n\t\tsetCitySearch(e.target.value);\n\t\tsetLocation(e.target.value);\n\t};\n\n\tconst handleSearchCity = (e) => {\n\t\te.preventDefault();\n\t\tautoSuggest(citySearch, cityCentre).then((res) => {\n\t\t\tsetCityCentre(res[0].position);\n\t\t\tsetUserCentre(res[0].position);\n\t\t});\n\t};\n\n\tconst directSearchCity = (e, location) => {\n\t\te.preventDefault();\n\t\tsetCitySearch(e.target.innerHTML);\n\t\tsetCityCentre(location.position);\n\t\tsetUserCentre(location.position);\n\t};\n\n\treturn (\n\t\t<div className='search-container'>\n\t\t\t<form className='search-bar'>\n\t\t\t\t<div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName={'search-input'}\n\t\t\t\t\t\tplaceholder='where to? try a city, place, address'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tname='search'\n\t\t\t\t\t\tid='search'\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tvalue={citySearch}\n\t\t\t\t\t\tonChange={handleCity}\n\t\t\t\t\t\tonFocus={() => setFocused(true)}\n\t\t\t\t\t\tonBlur={() => setFocused(false)}\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\tcitySearch.length && suggestedLocations.length !== 0 && focused ? (\n\t\t\t\t\t\t\t\t{ borderRadius: '20px 20px 0 0' }\n\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{citySearch.length && suggestedLocations.length !== 0 ? (\n\t\t\t\t\t\t<div className='listbox'>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t{suggestedLocations.map((location, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<li key={index} onMouseDown={(e) => directSearchCity(e, location)}>\n\t\t\t\t\t\t\t\t\t\t\t{location.title}\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<button className='search-btn' disabled={cityButtonDisabled} onClick={handleSearchCity}>\n\t\t\t\t\t\tGo\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect, useContext } from 'react';\nimport { Map } from '../map/Map';\nimport { Sidebar } from '../sidebar/Sidebar';\nimport SearchBar from '../search/SearchBar';\nimport { markPosts, markPlaces } from '../map/markerPosition';\nimport { handleErrors, parseErrors } from '../../services/errorHandlerService';\nimport { UserContext } from '../../UserContext';\nimport '../map/Map.css';\n\nexport default function Hub() {\n\tconst [ tags, setTags ] = useState([]);\n\tconst [ postMarkers, setPostMarkers ] = useState([]);\n\tconst [ mapSearchCoord, setMapSearchCoord ] = useState([]);\n\tconst [ postInMarker, setPostInMarker ] = useState(null); // When click post icon (triangular) in Map.js, will save post object to postInMarker, then show postInMarker in Sidebar.js\n\tconst [ markIsClicked, setMarkIsClicked ] = useState(false); // This status is both used in Map.js and Sidebar.js\n\n\tconst { locationClickCoord, setLocationClickCoord } = useContext(UserContext);\n\tconst { citySearch } = useContext(UserContext);\n\tconst { mapPlaces } = useContext(UserContext);\n\tconst { cityCentre } = useContext(UserContext);\n\tconst { userCentre } = useContext(UserContext);\n\tconst { postLoading } = useContext(UserContext);\n\tconst { posts } = useContext(UserContext);\n\tconst { domain } = useContext(UserContext);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tlet url = `${domain}/api/post/tags/all`;\n\n\t\t\tconst requestOptions = {\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: { 'Content-Type': 'application/json' }\n\t\t\t};\n\n\t\t\tfetch(url, requestOptions)\n\t\t\t\t.then(handleErrors)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tconst json = response.json();\n\t\t\t\t\treturn json;\n\t\t\t\t})\n\t\t\t\t.then((data) => {\n\t\t\t\t\tsetTags(data.postsByTag);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tparseErrors(err);\n\t\t\t\t});\n\t\t},\n\t\t[ posts ]\n\t);\n\n\t// return a list of posts objects\n\tuseEffect(\n\t\t() => {\n\t\t\tlet tempost = markPosts(tags);\n\t\t\tlet posts = [];\n\t\t\ttempost.forEach((post) => {\n\t\t\t\tlet coordinates = { lat: post.location.x, lng: post.location.y };\n\t\t\t\tposts.push({\n\t\t\t\t\tdate: post.date,\n\t\t\t\t\ttext: post.text,\n\t\t\t\t\timage: post.image,\n\t\t\t\t\ttitle: post.title,\n\t\t\t\t\tcoordinates: coordinates,\n\t\t\t\t\tusername: post.username,\n\t\t\t\t\ttag: post.tag\n\t\t\t\t});\n\t\t\t});\n\t\t\tif (posts.length > 0) {\n\t\t\t\tsetPostMarkers(posts);\n\t\t\t}\n\t\t},\n\t\t[ tags ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tlet marks = markPlaces(mapPlaces);\n\t\t\tif (marks.length > 0) {\n\t\t\t\tsetMapSearchCoord(marks); // marks is a tag object contains\n\t\t\t}\n\t\t},\n\t\t[ mapPlaces ]\n\t);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div className='loading-error'>\n\t\t\t\t{postLoading && <h3>. | . | . | a new story is loading | . | . | .</h3>}\n\t\t\t</div>\n\t\t\t<div className='hub'>\n\t\t\t\t<Sidebar\n\t\t\t\t\tpostInMarker={postInMarker}\n\t\t\t\t\tsetPostInMarker={setPostInMarker}\n\t\t\t\t\tsetMarkIsClicked={setMarkIsClicked}\n\t\t\t\t\tmarkIsClicked={markIsClicked}\n\t\t\t\t\tlocationClickCoord={locationClickCoord}\n\t\t\t\t\tsetLocationClickCoord={setLocationClickCoord}\n\t\t\t\t/>\n\t\t\t\t<div className='container-map'>\n\t\t\t\t\t<SearchBar />\n\t\t\t\t\t<Map\n\t\t\t\t\t\tpostMarkers={postMarkers} // pass a list of posts objects to map\n\t\t\t\t\t\tmapSearchCoord={mapSearchCoord}\n\t\t\t\t\t\tuserCentre={userCentre}\n\t\t\t\t\t\tcityCentre={cityCentre}\n\t\t\t\t\t\tcitySearch={citySearch}\n\t\t\t\t\t\tsetPostInMarker={setPostInMarker}\n\t\t\t\t\t\tsetMarkIsClicked={setMarkIsClicked}\n\t\t\t\t\t\tsetLocationClickCoord={setLocationClickCoord}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</React.Fragment>\n\t);\n}\n","export const markPosts = (tags) => {\n\tconst posts = [];\n\ttags.forEach((tag) => {\n\t\tif (tag.posts.length > 0) {\n\t\t\ttag.posts.forEach((post) => {\n\t\t\t\tpost.tag = tag.tag;\n\t\t\t\tposts.push(post);\n\t\t\t});\n\t\t}\n\t});\n\treturn posts;\n};\n\nexport const markPlaces = (mapSearch) => {\n\tlet searchPlaces = [];\n\tmapSearch.map((search) => {\n\t\tsearchPlaces.push({ coordinates: search.position, title: search.address.label });\n\t});\n\treturn searchPlaces;\n};\n","import React, { useContext } from 'react';\nimport { useState, useEffect } from 'react';\nimport { handleErrors, parseErrors } from '../../services/errorHandlerService';\nimport { autoSuggest } from '../search/autoSuggest';\nimport history from '../../history';\nimport { UserContext } from '../../UserContext';\n\nimport './Signup.css';\n\nexport default function Signup() {\n\tconst { email, setEmail } = useContext(UserContext);\n\tconst { setToken } = useContext(UserContext);\n\tconst { username, setUsername } = useContext(UserContext);\n\tconst { setLogin } = useContext(UserContext);\n\tconst { userCentre, setUserCentre } = useContext(UserContext);\n\tconst { domain } = useContext(UserContext);\n\n\tconst [ isButtonDisabled, setIsButtonDisabled ] = useState(true);\n\tconst [ password, setPassword ] = useState('');\n\tconst [ location, setLocation ] = useState('');\n\tconst [ position, setPosition ] = useState('');\n\n\tuseEffect(\n\t\t() => {\n\t\t\tautoSuggest(location, userCentre)\n\t\t\t\t.then(handleErrors)\n\t\t\t\t.then((res) => {\n\t\t\t\t\tlet position = { lat: -37.8136, lng: 144.9631 };\n\n\t\t\t\t\tif (res !== undefined && res.length > 0) {\n\t\t\t\t\t\tposition = `(${res[0].position.lat}, ${res[0].position.lng})`;\n\t\t\t\t\t}\n\n\t\t\t\t\tsetPosition(position);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tparseErrors(err);\n\t\t\t\t});\n\t\t},\n\t\t[ location ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (username.trim() && email.trim() && password.trim() && position.trim()) {\n\t\t\t\tsetIsButtonDisabled(false);\n\t\t\t} else {\n\t\t\t\tsetIsButtonDisabled(true);\n\t\t\t}\n\t\t},\n\t\t[ username, email, password, position ]\n\t);\n\n\tconst handleJoin = (e) => {\n\t\te.preventDefault();\n\n\t\tlet url = `${domain}/api/signup`;\n\n\t\tconst requestOptions = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\tbody: JSON.stringify({ email: email, password: password, username: username, position: position })\n\t\t};\n\t\tfetch(url, requestOptions)\n\t\t\t.then(handleErrors)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tsetEmail(data.user.email);\n\t\t\t\tsetToken(data.user.token);\n\t\t\t\tsetUsername(data.user.username);\n\t\t\t\tsetUserCentre({ lat: data.user.position.x, lng: data.user.position.y });\n\t\t\t\tsetLogin(true);\n\n\t\t\t\thistory.push('/map');\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tparseErrors(err);\n\t\t\t\tsetLogin(false);\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<div className='form-container'>\n\t\t\t<div className='title'>\n\t\t\t\t<h2>Your moments make great stories</h2>\n\t\t\t\t<h4>Sign up for a free account</h4>\n\t\t\t</div>\n\t\t\t<form className='form-wraper' method='POST' name='signup' onSubmit={handleJoin}>\n\t\t\t\t<div className='input-wraper'>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\tplaceholder='your name'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tid='username'\n\t\t\t\t\t\tname='username'\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tonChange={(e) => setUsername(e.target.value)}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<label className='label' htmlFor='username'>\n\t\t\t\t\t\tUsername\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='input-wraper'>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\tplaceholder='name of a city, place or address'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tid='location'\n\t\t\t\t\t\tname='location'\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<label className='label' htmlFor='location'>\n\t\t\t\t\t\tBase Location\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='input-wraper'>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\tplaceholder='your email'\n\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\tname='email'\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<label className='label' htmlFor='email'>\n\t\t\t\t\t\tEmail address\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='input-wraper'>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\tplaceholder='your password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tid='password'\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<label className='label' htmlFor='password'>\n\t\t\t\t\t\tPassword\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<button className='btn' type='submit' disabled={isButtonDisabled}>\n\t\t\t\t\tJoin\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n","import React, { useContext, useState, useEffect } from 'react';\nimport history from '../../history';\nimport { UserContext } from '../../UserContext';\nimport { handleErrors, parseErrors } from '../../services/errorHandlerService';\n\nimport './Login.css';\n\nexport default function Login() {\n\tconst { email, setEmail } = useContext(UserContext);\n\tconst { setToken } = useContext(UserContext);\n\tconst { login, setLogin } = useContext(UserContext);\n\tconst { setUsername } = useContext(UserContext);\n\tconst { userCentre, setUserCentre } = useContext(UserContext);\n\n\tconst [ password, setPassword ] = useState('');\n\tconst [ isButtonDisabled, setIsButtonDisabled ] = useState(true);\n\tconst [ helperText, setHelperText ] = useState('');\n\tconst { domain } = useContext(UserContext);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif ((email.trim() && password.trim()) || email === '') {\n\t\t\t\tsetIsButtonDisabled(false);\n\t\t\t\tsetHelperText('');\n\t\t\t} else {\n\t\t\t\tsetIsButtonDisabled(true);\n\t\t\t}\n\t\t},\n\t\t[ email, password ]\n\t);\n\n\tconst handleLogin = (e) => {\n\t\te.preventDefault();\n\n\t\tlet url = `${domain}/api/login`;\n\n\t\tconst requestOptions = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\tbody: JSON.stringify({ email: email, password: password })\n\t\t};\n\n\t\tfetch(url, requestOptions)\n\t\t\t.then(handleErrors)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tconsole.log(data);\n\n\t\t\t\tsetEmail(data.user.email);\n\t\t\t\tsetToken(data.user.token);\n\t\t\t\tsetUsername(data.user.username);\n\t\t\t\tsetUserCentre({ lat: data.user.position.x, lng: data.user.position.y });\n\t\t\t\tsetLogin(true);\n\n\t\t\t\tconsole.log(userCentre);\n\n\t\t\t\thistory.push('/map');\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tparseErrors(err);\n\t\t\t\tsetLogin(false);\n\t\t\t\tsetHelperText('incorrect email or password, try again');\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<div className='form-container'>\n\t\t\t<div className='title'>\n\t\t\t\t<h2>LogIn to add stories</h2>\n\t\t\t\t<h4>Thanks for being a guide</h4>\n\t\t\t</div>\n\t\t\t<form className='form-wraper' method='POST' name='signup' onSubmit={handleLogin}>\n\t\t\t\t<div className='input-wraper'>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\tplaceholder='your email'\n\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\tname='email'\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<label className='label' htmlFor='email'>\n\t\t\t\t\t\tEmail address\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='input-wraper'>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\tplaceholder='your password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tid='password'\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<label className='label' htmlFor='password'>\n\t\t\t\t\t\tPassword\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<button className='btn' type='submit' disabled={isButtonDisabled}>\n\t\t\t\t\tLogIn\n\t\t\t\t</button>\n\t\t\t\t<p className='error-msg'>{helperText}</p>\n\t\t\t\t<div className='join-direction'>\n\t\t\t\t\t<p>Haven't signed up yet?</p>\n\t\t\t\t\t{!login ? (\n\t\t\t\t\t\t<button className='join-btn' onClick={() => history.push('/signup')}>\n\t\t\t\t\t\t\tMake Account\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n","import React, { useContext } from 'react';\nimport history from '../../history';\nimport { UserContext } from '../../UserContext';\n\nimport './Home.css';\n\nexport default function Home() {\n\tconst { login } = useContext(UserContext);\n\n\treturn (\n\t\t<div className='description'>\n\t\t\t<div className='container-explore'>\n\t\t\t\t<h1 className='desc-title'>Wander. Explore. Share.</h1>\n\t\t\t\t<div className='desc-explore'>\n\t\t\t\t\t<div className='container-img'>\n\t\t\t\t\t\t<img src='https://cdn2.iconfinder.com/data/icons/bagbox/png/globe-terrestre.png' />\n\t\t\t\t\t</div>\n\t\t\t\t\t<p>Wander the map and discover nearby stories.</p>\n\t\t\t\t</div>\n\t\t\t\t<div className='desc-explore'>\n\t\t\t\t\t<div className='container-img'>\n\t\t\t\t\t\t<img src='https://cdn4.iconfinder.com/data/icons/Travel_Icon_Pack/PNG/travel%20management.png' />\n\t\t\t\t\t</div>\n\t\t\t\t\t<p>Explore cities you can’t wait to travel to.</p>\n\t\t\t\t</div>\n\t\t\t\t<div className='desc-explore'>\n\t\t\t\t\t<div className='container-img'>\n\t\t\t\t\t\t<img src='https://cdn4.iconfinder.com/data/icons/refresh_cl/256/Misc/Holiday.png' />\n\t\t\t\t\t</div>\n\t\t\t\t\t<p>Share your stories and return to them any time.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className='container-desc'>\n\t\t\t\t<h1 className='desc-title'>uraXa map is a free community resource</h1>\n\t\t\t\t<div>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span className='desc-title'>uralla</span> means a place to come together.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>It is a vantage point to see the common paths we travel.</p>\n\t\t\t\t\t<p>You can explore anytime as a guest or make an account to guide other explorers.</p>\n\t\t\t\t</div>\n\t\t\t\t<div className='container-btn'>\n\t\t\t\t\t<button className='explore-btn' onClick={() => history.push('/map')}>\n\t\t\t\t\t\tExplore Map\n\t\t\t\t\t</button>\n\t\t\t\t\t{!login ? (\n\t\t\t\t\t\t<button className='join-btn' onClick={() => history.push('/signup')}>\n\t\t\t\t\t\t\tMake Account\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport './Footer.css';\n\nexport default function Footer() {\n\treturn (\n\t\t<footer className='footer'>\n\t\t\t<p>\n\t\t\t\tCreated by <span>Brown Bear</span> | &copy; 2020\n\t\t\t</p>\n\t\t</footer>\n\t);\n}\n","import React, { useState } from 'react';\nimport Profile from './components/profile/Profile';\nimport Hub from './components/hub/Hub';\nimport Signup from './components/signup/Signup';\nimport Login from './components/login/Login';\nimport Add from './components/add/Add';\nimport Home from './components/home/Home';\nimport Footer from './components/footer/Footer';\nimport { UserContext } from './UserContext';\nimport { Router, Switch, Route, NavLink } from 'react-router-dom';\nimport history from './history';\n\nimport './App.css';\n\nexport default function App() {\n\tconst [ token, setToken ] = useState('');\n\tconst [ email, setEmail ] = useState('');\n\tconst [ username, setUsername ] = useState('');\n\tconst [ login, setLogin ] = useState(false);\n\tconst [ types, setTypes ] = useState([]);\n\tconst [ mapPlaces, setMapPlaces ] = useState([]);\n\tconst [ citySearch, setCitySearch ] = useState([]);\n\tconst [ cityCentre, setCityCentre ] = useState({ lat: -16.925491, lng: 145.75412 });\n\tconst [ userCentre, setUserCentre ] = useState({ lat: -16.925491, lng: 145.75412 });\n\tconst [ posts, setPosts ] = useState([]);\n\tconst [ postLoading, setPostLoading ] = useState(false);\n\tconst [ locationClickCoord, setLocationClickCoord ] = useState({});\n\tconst [ publish, setPublish ] = useState(false);\n\tconst [ locationIsClicked, setLocationIsClicked ] = useState(false);\n\tconst [ domain ] = useState('https://uraxa-api.herokuapp.com');\n\n\tconst userContext = {\n\t\ttoken,\n\t\tsetToken,\n\t\temail,\n\t\tsetEmail,\n\t\tusername,\n\t\tsetUsername,\n\t\tlogin,\n\t\tsetLogin,\n\t\tcityCentre,\n\t\tsetCityCentre,\n\t\tposts,\n\t\tsetPosts,\n\t\ttypes,\n\t\tsetTypes,\n\t\tmapPlaces,\n\t\tsetMapPlaces,\n\t\tuserCentre,\n\t\tsetUserCentre,\n\t\tcitySearch,\n\t\tsetCitySearch,\n\t\tpostLoading,\n\t\tsetPostLoading,\n\t\tlocationClickCoord,\n\t\tsetLocationClickCoord,\n\t\tpublish,\n\t\tsetPublish,\n\t\tlocationIsClicked,\n\t\tsetLocationIsClicked,\n\t\tdomain\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Router history={history}>\n\t\t\t\t<div className='header'>\n\t\t\t\t\t<div className='header-left'>\n\t\t\t\t\t\t{!login ? <h1>uralla</h1> : null}\n\t\t\t\t\t\t{login ? <h1>uraXa</h1> : null}\n\t\t\t\t\t\t<NavLink className='nav' activeClassName='active-nav' to='/' exact>\n\t\t\t\t\t\t\tHome\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t<NavLink className='nav' activeClassName='active-nav' to='/map'>\n\t\t\t\t\t\t\tMap\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='header-right'>\n\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t{login ? 'heXo' : ''} {login ? username : ''}\n\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t{login ? (\n\t\t\t\t\t\t\t<NavLink className='nav' activeClassName='active-nav' to='/profile'>\n\t\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{!login ? (\n\t\t\t\t\t\t\t<NavLink className='nav' activeClassName='active-nav' to='/login'>\n\t\t\t\t\t\t\t\tLogIn\n\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{!login ? (\n\t\t\t\t\t\t\t<NavLink className='nav' activeClassName='active-nav' to='/signup'>\n\t\t\t\t\t\t\t\tSignUp\n\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Switch>\n\t\t\t\t\t<UserContext.Provider value={userContext}>\n\t\t\t\t\t\t<Route path='/profile'>\n\t\t\t\t\t\t\t<Profile />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path='/map'>\n\t\t\t\t\t\t\t<Hub />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path='/signup'>\n\t\t\t\t\t\t\t<Signup />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path='/login'>\n\t\t\t\t\t\t\t<Login />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path='/add'>\n\t\t\t\t\t\t\t<Add />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path='/' exact>\n\t\t\t\t\t\t\t<Home />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t</UserContext.Provider>\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t\t\t<Footer />\n\t\t</div>\n\t);\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();"],"sourceRoot":""}